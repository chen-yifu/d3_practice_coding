(function (d3) {
  'use strict';

  const colorScale = d3.scaleOrdinal()
    .domain(['apple', 'lemon'])
    .range(['#c11d1d', '#eae600']);

  const radiusScale = d3.scaleOrdinal()
    .domain(['apple', 'lemon'])
    .range([50, 30]);

  const xPosition = (d, i) => i * 120 + 60;

  const fruitBowl = (selection, props) => {
    const { 
    	fruits,
     	height,
     	setSelectedFruit, 
    	selectedFruit,
      setClickedFruit,
      clickedFruit
          } = props;
    const circles = selection.selectAll('circle')
      .data(fruits, d => d.id);
    circles
      .enter().append('circle')
        .attr('cx', xPosition)
        .attr('cy', height / 2)
        .attr('r', 0)
      .merge(circles)
        .attr('fill', d => colorScale(d.type)) 
    		.attr('stroke-width', '5px')
    		.attr('stroke', d => {
    			if(d.id == selectedFruit) {
          	return 'blue';
          }
      		if(d.id == clickedFruit) {
          	return 'black';
          }
      		return 'none';
    		})
    		.on('mouseover', d => setSelectedFruit(d.id))
      	.on('mouseout', d => setSelectedFruit(null))
    		.on('click', d => setClickedFruit(d.id))
      .transition().duration(1000)
        .attr('cx', xPosition)
        .attr('r', d => radiusScale(d.type));
    circles.exit()
      .transition().duration(1000)
        .attr('r', 0)
      .remove();
  };

  const svg = d3.select('svg');

  const makeFruit = type => ({
    type,
    id: Math.random()
  });
  let fruits = d3.range(5)
    .map(() => makeFruit('apple'));

  let selectedFruit = null;
  let clickedFruit = null;
   
  const setSelectedFruit = id => {
  	selectedFruit = id;
    render();
  };
   
  const setClickedFruit = id => {
  	clickedFruit = id;
    render();

  };

  const render = () => {
    fruitBowl(svg, {
      fruits,
      height: +svg.attr('height'),
      setSelectedFruit,
      selectedFruit,
      setClickedFruit,
      clickedFruit
    });
  };

  render();

  // Eat an apple.
  setTimeout(() => {
    fruits.pop();
    render();
  }, 1000);

  // Replacing an apple with a lemon.
  setTimeout(() => {
    fruits[2].type = 'lemon';
    render();
  }, 2000);

  // Eat an apple.
  setTimeout(() => {
    fruits = fruits.filter((d, i) => i !== 1);
    render();
  }, 3000);

}(d3));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImZydWl0Qm93bC5qcyIsImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNjYWxlT3JkaW5hbCB9IGZyb20gJ2QzJztcblxuY29uc3QgY29sb3JTY2FsZSA9IHNjYWxlT3JkaW5hbCgpXG4gIC5kb21haW4oWydhcHBsZScsICdsZW1vbiddKVxuICAucmFuZ2UoWycjYzExZDFkJywgJyNlYWU2MDAnXSk7XG5cbmNvbnN0IHJhZGl1c1NjYWxlID0gc2NhbGVPcmRpbmFsKClcbiAgLmRvbWFpbihbJ2FwcGxlJywgJ2xlbW9uJ10pXG4gIC5yYW5nZShbNTAsIDMwXSk7XG5cbmNvbnN0IHhQb3NpdGlvbiA9IChkLCBpKSA9PiBpICogMTIwICsgNjA7XG5cbmV4cG9ydCBjb25zdCBmcnVpdEJvd2wgPSAoc2VsZWN0aW9uLCBwcm9wcykgPT4ge1xuICBjb25zdCB7IFxuICBcdGZydWl0cyxcbiAgIFx0aGVpZ2h0LFxuICAgXHRzZXRTZWxlY3RlZEZydWl0LCBcbiAgXHRzZWxlY3RlZEZydWl0LFxuICAgIHNldENsaWNrZWRGcnVpdCxcbiAgICBjbGlja2VkRnJ1aXRcbiAgICAgICAgfSA9IHByb3BzO1xuICBjb25zdCBjaXJjbGVzID0gc2VsZWN0aW9uLnNlbGVjdEFsbCgnY2lyY2xlJylcbiAgICAuZGF0YShmcnVpdHMsIGQgPT4gZC5pZCk7XG4gIGNpcmNsZXNcbiAgICAuZW50ZXIoKS5hcHBlbmQoJ2NpcmNsZScpXG4gICAgICAuYXR0cignY3gnLCB4UG9zaXRpb24pXG4gICAgICAuYXR0cignY3knLCBoZWlnaHQgLyAyKVxuICAgICAgLmF0dHIoJ3InLCAwKVxuICAgIC5tZXJnZShjaXJjbGVzKVxuICAgICAgLmF0dHIoJ2ZpbGwnLCBkID0+IGNvbG9yU2NhbGUoZC50eXBlKSkgXG4gIFx0XHQuYXR0cignc3Ryb2tlLXdpZHRoJywgJzVweCcpXG4gIFx0XHQuYXR0cignc3Ryb2tlJywgZCA9PiB7XG4gIFx0XHRcdGlmKGQuaWQgPT0gc2VsZWN0ZWRGcnVpdCkge1xuICAgICAgICBcdHJldHVybiAnYmx1ZSc7XG4gICAgICAgIH1cbiAgICBcdFx0aWYoZC5pZCA9PSBjbGlja2VkRnJ1aXQpIHtcbiAgICAgICAgXHRyZXR1cm4gJ2JsYWNrJztcbiAgICAgICAgfVxuICAgIFx0XHRyZXR1cm4gJ25vbmUnO1xuICBcdFx0fSlcbiAgXHRcdC5vbignbW91c2VvdmVyJywgZCA9PiBzZXRTZWxlY3RlZEZydWl0KGQuaWQpKVxuICAgIFx0Lm9uKCdtb3VzZW91dCcsIGQgPT4gc2V0U2VsZWN0ZWRGcnVpdChudWxsKSlcbiAgXHRcdC5vbignY2xpY2snLCBkID0+IHNldENsaWNrZWRGcnVpdChkLmlkKSlcbiAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDEwMDApXG4gICAgICAuYXR0cignY3gnLCB4UG9zaXRpb24pXG4gICAgICAuYXR0cigncicsIGQgPT4gcmFkaXVzU2NhbGUoZC50eXBlKSk7XG4gIGNpcmNsZXMuZXhpdCgpXG4gICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbigxMDAwKVxuICAgICAgLmF0dHIoJ3InLCAwKVxuICAgIC5yZW1vdmUoKTtcbn0iLCJpbXBvcnQgeyBzZWxlY3QsIHJhbmdlIH0gZnJvbSAnZDMnO1xuaW1wb3J0IHsgZnJ1aXRCb3dsIH0gZnJvbSAnLi9mcnVpdEJvd2wnO1xuXG5jb25zdCBzdmcgPSBzZWxlY3QoJ3N2ZycpO1xuXG5jb25zdCBtYWtlRnJ1aXQgPSB0eXBlID0+ICh7XG4gIHR5cGUsXG4gIGlkOiBNYXRoLnJhbmRvbSgpXG59KTtcbmxldCBmcnVpdHMgPSByYW5nZSg1KVxuICAubWFwKCgpID0+IG1ha2VGcnVpdCgnYXBwbGUnKSk7XG5cbmxldCBzZWxlY3RlZEZydWl0ID0gbnVsbDtcbmxldCBjbGlja2VkRnJ1aXQgPSBudWxsO1xuIFxuY29uc3Qgc2V0U2VsZWN0ZWRGcnVpdCA9IGlkID0+IHtcblx0c2VsZWN0ZWRGcnVpdCA9IGlkO1xuICByZW5kZXIoKTtcbn07XG4gXG5jb25zdCBzZXRDbGlja2VkRnJ1aXQgPSBpZCA9PiB7XG5cdGNsaWNrZWRGcnVpdCA9IGlkO1xuICByZW5kZXIoKTtcblxufTtcblxuY29uc3QgcmVuZGVyID0gKCkgPT4ge1xuICBmcnVpdEJvd2woc3ZnLCB7XG4gICAgZnJ1aXRzLFxuICAgIGhlaWdodDogK3N2Zy5hdHRyKCdoZWlnaHQnKSxcbiAgICBzZXRTZWxlY3RlZEZydWl0LFxuICAgIHNlbGVjdGVkRnJ1aXQsXG4gICAgc2V0Q2xpY2tlZEZydWl0LFxuICAgIGNsaWNrZWRGcnVpdFxuICB9KTtcbn07XG5cbnJlbmRlcigpO1xuXG4vLyBFYXQgYW4gYXBwbGUuXG5zZXRUaW1lb3V0KCgpID0+IHtcbiAgZnJ1aXRzLnBvcCgpO1xuICByZW5kZXIoKTtcbn0sIDEwMDApO1xuXG4vLyBSZXBsYWNpbmcgYW4gYXBwbGUgd2l0aCBhIGxlbW9uLlxuc2V0VGltZW91dCgoKSA9PiB7XG4gIGZydWl0c1syXS50eXBlID0gJ2xlbW9uJztcbiAgcmVuZGVyKCk7XG59LCAyMDAwKTtcblxuLy8gRWF0IGFuIGFwcGxlLlxuc2V0VGltZW91dCgoKSA9PiB7XG4gIGZydWl0cyA9IGZydWl0cy5maWx0ZXIoKGQsIGkpID0+IGkgIT09IDEpO1xuICByZW5kZXIoKTtcbn0sIDMwMDApOyJdLCJuYW1lcyI6WyJzY2FsZU9yZGluYWwiLCJzZWxlY3QiLCJyYW5nZSJdLCJtYXBwaW5ncyI6Ijs7O0VBRUEsTUFBTSxVQUFVLEdBQUdBLGVBQVksRUFBRTtLQUM5QixNQUFNLENBQUMsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7S0FDMUIsS0FBSyxDQUFDLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUM7O0VBRWpDLE1BQU0sV0FBVyxHQUFHQSxlQUFZLEVBQUU7S0FDL0IsTUFBTSxDQUFDLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0tBQzFCLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDOztFQUVu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